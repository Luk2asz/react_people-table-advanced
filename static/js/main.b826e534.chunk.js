(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(26),a=n(9),r=(n(36),n(37),n(3)),s=n(5),l=n(6),o=n(4),i=n(0),j=n(15),d=n(8),u=n(10),b=n.n(u),h=n(27);function O(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),c=t[0],a=t[1];null===a?n.delete(c):Array.isArray(a)?(n.delete(c),a.forEach((function(e){n.append(c,e)}))):n.set(c,a)})),n.toString()}var m=n(1),f=["children","params"],p=function(e){var t=e.children,n=e.params,c=Object(h.a)(e,f),r=Object(a.d)(),s=Object(o.a)(r,1)[0];return Object(m.jsx)(a.b,Object(j.a)(Object(j.a)({to:{search:O(s,n)}},c),{},{children:t}))},x=function(e){return e.male="m",e.female="f",e.all="all",e}(x||{}),v=function(e){var t,n=e.people,c=e.handlePeople,r=e.handleParams,s=Object(a.d)(window.location.hash.substring(window.location.hash.indexOf("?"))),l=Object(o.a)(s,2),u=l[0],h=l[1],O=Object(i.useState)(x.all),f=Object(o.a)(O,2),v=f[0],g=f[1],N=Object(i.useState)(null!==(t=u.get("query"))&&void 0!==t?t:""),S=Object(o.a)(N,2),w=S[0],y=S[1],k=Object(i.useState)(u.getAll("centuries").map((function(e){return+e}))),P=Object(o.a)(k,2),C=P[0],A=P[1];Object(i.useEffect)((function(){var e=u.get("sex");e===x.male?g(x.male):e===x.female&&g(x.female),window.location.hash.includes("?")?r(window.location.hash.substring(window.location.hash.indexOf("?"))):r("")})),Object(i.useEffect)((function(){var e=n.filter((function(e){return v===x.all?e:e.sex===v})),t=0===C.length?[16,17,18,19,20]:Object(d.a)(C),a=e.filter((function(e){return t.includes(Math.ceil(e.born/100))}));c(a.filter((function(e){var t=!1,n=!1;return e.fatherName&&(t=e.fatherName.toLocaleLowerCase().includes(w)),e.motherName&&(n=e.motherName.toLocaleLowerCase().includes(w)),e.name.toLocaleLowerCase().includes(w)||t||n})))}),[w,v,C]);var L,F=function(e){return{centuries:C.includes(e)?C.filter((function(t){return t!==e})).map((function(e){return String(e)})):[].concat(Object(d.a)(C.map((function(e){return String(e)}))),[String(e)])}};return Object(m.jsxs)("nav",{className:"panel",children:[Object(m.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(m.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(m.jsx)(p,{className:(L=v,b()({"is-active":L===x.all})),params:{sex:null},onClick:function(){g(x.all),u.delete("sex")},children:"All"}),Object(m.jsx)(p,{className:function(e){return b()({"is-active":e===x.male})}(v),params:{sex:"m"},onClick:function(){return g(x.male)},children:"Male"}),Object(m.jsx)(p,{className:function(e){return b()({"is-active":e===x.female})}(v),params:{sex:"f"},onClick:function(){return g(x.female)},children:"Female"})]}),Object(m.jsx)("div",{className:"panel-block",children:Object(m.jsxs)("p",{className:"control has-icons-left",children:[Object(m.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:w,onChange:function(e){y(e.target.value.toLowerCase()),h(Object(j.a)(Object(j.a)({},u),{},{query:e.target.value.toLowerCase()}))}}),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(m.jsx)("div",{className:"panel-block",children:Object(m.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(m.jsx)("div",{className:"level-left",children:[16,17,18,19,20].map((function(e){return Object(m.jsx)(p,{"data-cy":"century",className:"button mr-1".concat(C.includes(e)?" is-info":""),onClick:function(){return function(e){C.includes(e)?A(C.filter((function(t){return t!==e}))):A([].concat(Object(d.a)(C),[e]))}(e)},params:F(e),children:e},e)}))}),Object(m.jsx)("div",{className:"level-right ml-4",children:Object(m.jsx)(p,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:null},onClick:function(){return A([])},children:"All"})})]})}),Object(m.jsx)("div",{className:"panel-block",children:Object(m.jsx)(p,{className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null},onClick:function(){g(x.all),y(""),A([])},children:"Reset all filters"})})]})},g=(n(39),function(){return Object(m.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(m.jsx)("div",{className:"Loader__content"})})}),N=function(e){var t=e.person,n=e.handleSlugUser,c=e.people,r=e.isParent,s=e.allParams,l=Object(i.useMemo)((function(){if("no"===r)return t;var e=c.find((function(e){return e.name===t.motherName}));return"father"===r&&(e=c.find((function(e){return e.name===t.fatherName}))),e||t}),[]);return Object(m.jsx)(a.b,{className:"f"===l.sex?"has-text-danger":"",to:"/people/".concat(l.slug).concat(s),onClick:function(){return n(l.slug)},children:l.name})},S=function(e){var t,n,c=e.person,a=e.people,r=e.handleSlugUser,s=e.slugUser,l=e.allParams;t=null!==c.motherName?a.some((function(e){return e.name===c.motherName}))?Object(m.jsx)("td",{children:Object(m.jsx)(N,{person:c,handleSlugUser:r,people:a,isParent:"mother",allParams:l})}):Object(m.jsx)("td",{children:c.motherName}):Object(m.jsx)("td",{children:"-"}),n=null!==c.fatherName?a.some((function(e){return e.name===c.fatherName}))?Object(m.jsx)("td",{children:Object(m.jsx)(N,{person:c,handleSlugUser:r,people:a,isParent:"father",allParams:l})}):Object(m.jsx)("td",{children:c.fatherName}):Object(m.jsx)("td",{children:"-"});var o;return Object(m.jsxs)("tr",{"data-cy":"person",className:(o=c,b()({"has-background-warning":o.slug===s})),children:[Object(m.jsx)("td",{children:Object(m.jsx)(N,{person:c,handleSlugUser:r,people:a,isParent:"no",allParams:l})}),Object(m.jsx)("td",{children:c.sex}),Object(m.jsx)("td",{children:c.born}),Object(m.jsx)("td",{children:c.died}),t,n]})},w=function(e){return e[e.notSorted=0]="notSorted",e[e.sortAsc=1]="sortAsc",e[e.sortDesc=2]="sortDesc",e}(w||{}),y=function(e){var t=e.people,n=e.allParams,c=Object(r.q)(),s=Object(i.useState)(c.slug),l=Object(o.a)(s,2),j=l[0],u=l[1],h=Object(a.d)(window.location.hash.substring(window.location.hash.indexOf("?"))),O=Object(o.a)(h,2),f=O[0],x=O[1],v=Object(i.useState)(w.notSorted),g=Object(o.a)(v,2),N=g[0],y=g[1],k=Object(i.useState)(w.notSorted),P=Object(o.a)(k,2),C=P[0],A=P[1],L=Object(i.useState)(w.notSorted),F=Object(o.a)(L,2),D=F[0],U=F[1],E=Object(i.useState)(w.notSorted),M=Object(o.a)(E,2),_=M[0],T=M[1],q=Object(i.useState)(null),R=Object(o.a)(q,2),B=R[0],H=R[1],J=function(e){u(e)},I=function(e){return b()({"fas fa-sort":e===w.notSorted},{"fas fa-sort-up":e===w.sortAsc},{"fas fa-sort-down":e===w.sortDesc})},z=function(e,t,n){switch(e){case w.notSorted:t(w.sortAsc),f.set("sort",n),x(f);break;case w.sortAsc:t(w.sortDesc),f.set("order","desc"),x(f);break;default:t(w.notSorted),f.delete("sort"),f.delete("order")}};Object(i.useEffect)((function(){switch(f.get("sort")){case"name":A(w.sortAsc),"desc"===f.get("order")&&A(w.sortDesc),H("name");break;case"sex":y(w.sortAsc),"desc"===f.get("order")&&y(w.sortDesc),H("sex");break;case"born":U(w.sortAsc),"desc"===f.get("order")&&U(w.sortDesc),H("born");break;case"died":T(w.sortAsc),"desc"===f.get("order")&&T(w.sortDesc),H("died")}}),[f]);var G=function(e){var n=w.notSorted;switch(e){case"name":n=C;break;case"sex":n=N;break;case"born":n=D;break;case"died":n=_}if(e)switch(n){case w.sortAsc:return t.slice().sort((function(t,n){var c=t[e],a=n[e];return"string"===typeof c&&"string"===typeof a?c.localeCompare(a):"number"===typeof c&&"number"===typeof a?c-a:0}));case w.sortDesc:return t.slice().sort((function(t,n){var c=t[e],a=n[e];return"string"===typeof c&&"string"===typeof a?a.localeCompare(c):"number"===typeof c&&"number"===typeof a?a-c:0}));case w.notSorted:return Object(d.a)(t);default:return t}return t}(B),K=function(e){return f.get("sort")===e&&f.has("order")?null:e},Q=function(e){return f.get("sort")!==e||f.has("order")?null:"desc"};return Object(m.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:Object(m.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(m.jsx)(p,{params:{sort:K("name"),order:Q("name")},onClick:function(){f.delete("order"),z(C,A,"name"),y(w.notSorted),U(w.notSorted),T(w.notSorted)},children:Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)("i",{className:I(C)})})})]})}),Object(m.jsx)("th",{children:Object(m.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(m.jsx)(p,{params:{sort:K("sex"),order:Q("sex")},onClick:function(){f.delete("order"),z(N,y,"sex"),A(w.notSorted),U(w.notSorted),T(w.notSorted)},children:Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)("i",{className:I(N)})})})]})}),Object(m.jsx)("th",{children:Object(m.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(m.jsx)(p,{params:{sort:K("born"),order:Q("born")},onClick:function(){f.delete("order"),z(D,U,"born"),y(w.notSorted),A(w.notSorted),T(w.notSorted)},children:Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)("i",{className:I(D)})})})]})}),Object(m.jsx)("th",{children:Object(m.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(m.jsx)(p,{params:{sort:K("died"),order:Q("died")},onClick:function(){f.delete("order"),z(_,T,"died"),y(w.notSorted),U(w.notSorted),A(w.notSorted)},children:Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)("i",{className:I(_)})})})]})}),Object(m.jsx)("th",{children:"Mother"}),Object(m.jsx)("th",{children:"Father"})]})}),Object(m.jsx)("tbody",{children:G.map((function(e){return Object(m.jsx)(S,{person:e,people:t,handleSlugUser:J,slugUser:j,allParams:n},e.slug)}))})]})},k="https://mate-academy.github.io/react_people-table/api/people.json";function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function C(){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(500).then((function(){return fetch(k)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),r=Object(o.a)(a,2),j=r[0],d=r[1],u=Object(i.useState)(!1),b=Object(o.a)(u,2),h=b[0],O=b[1],f=Object(i.useState)([]),p=Object(o.a)(f,2),x=p[0],N=p[1],S=Object(i.useState)(""),w=Object(o.a)(S,2),k=w[0],P=w[1];Object(i.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,C();case 4:t=e.sent,c(t),N(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),d("Unable to load people");case 12:O(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"title",children:"People Page"}),Object(m.jsx)("div",{className:"block",children:Object(m.jsx)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:h?Object(m.jsx)(g,{}):Object(m.jsx)(m.Fragment,{children:j?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})}):Object(m.jsx)(m.Fragment,{children:0===n.length?Object(m.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(m.jsx)(v,{people:n,handlePeople:function(e){N(e)},handleParams:function(e){P(e)}})}),Object(m.jsx)("div",{className:"column",children:Object(m.jsx)("div",{className:"box table-container",children:x.length>0?Object(m.jsx)(y,{people:x,allParams:k}):Object(m.jsx)("p",{children:"There are no people matching the current search criteria"})})})]})})})})})]})},F=function(e){var t=e.isActive;return b()("navbar-item",{"has-background-grey-lighter":t})},D=function(){return Object(m.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"navbar-brand",children:[Object(m.jsx)(a.c,{to:"/",className:F,children:"Home"}),Object(m.jsx)(a.c,{"aria-current":"page",to:"/people",className:F,children:"People"})]})})})},U=(n(40),function(){return Object(m.jsx)("h1",{className:"title",children:"Home Page"})}),E=function(){return Object(m.jsx)("h1",{className:"title",children:"Page not found"})},M=function(){return Object(m.jsxs)("div",{"data-cy":"app",children:[Object(m.jsx)(D,{}),Object(m.jsx)("div",{className:"section",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(r.d,{children:[Object(m.jsx)(r.b,{path:"/",element:Object(m.jsx)(U,{})}),Object(m.jsxs)(r.b,{path:"/people",element:Object(m.jsx)(L,{}),children:[Object(m.jsx)(r.b,{index:!0,element:Object(m.jsx)(L,{})}),Object(m.jsx)(r.b,{path:":slug",element:Object(m.jsx)(L,{})})]}),Object(m.jsx)(r.b,{path:"/home",element:Object(m.jsx)(r.a,{to:"/"})}),Object(m.jsx)(r.b,{path:"*",element:Object(m.jsx)(E,{})})]})})})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(m.jsx)(a.a,{children:Object(m.jsx)(M,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.b826e534.chunk.js.map