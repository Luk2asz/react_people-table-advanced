(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var s=c(24),n=c(8),a=(c(33),c(34),c(3)),r=c(4),o=c(6),l=c(5),i=c(0),j=c(7),d=c(1),b=function(e){return e.male="m",e.female="f",e.all="all",e}(b||{}),u=function(e){var t=e.people,c=e.handlePeople,s=Object(i.useState)(b.all),a=Object(l.a)(s,2),r=a[0],o=a[1],u=Object(i.useState)(""),h=Object(l.a)(u,2),p=h[0],O=h[1],m=Object(i.useState)([]),x=Object(l.a)(m,2),f=x[0],N=x[1];return Object(i.useEffect)((function(){var e=t.filter((function(e){return r===b.all?e:e.sex===r})),s=0===f.length?[16,17,18,19,20]:Object(j.a)(f),n=e.filter((function(e){return s.includes(Math.ceil(e.born/100))}));c(n.filter((function(e){var t=!1,c=!1;return e.fatherName&&(t=e.fatherName.toLocaleLowerCase().includes(p)),e.motherName&&(c=e.motherName.toLocaleLowerCase().includes(p)),e.name.toLocaleLowerCase().includes(p)||t||c})))}),[p,r,f]),Object(d.jsxs)("nav",{className:"panel",children:[Object(d.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(d.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(d.jsx)(n.b,{className:r===b.all?"is-active":"",to:"#/people",onClick:function(){o(b.all)},children:"All"}),Object(d.jsx)(n.b,{className:r===b.male?"is-active":"",to:"#/people?sex=m",onClick:function(){return o(b.male)},children:"Male"}),Object(d.jsx)(n.b,{className:r===b.female?"is-active":"",to:"#/people?sex=f",onClick:function(){return o(b.female)},children:"Female"})]}),Object(d.jsx)("div",{className:"panel-block",children:Object(d.jsxs)("p",{className:"control has-icons-left",children:[Object(d.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:p,onChange:function(e){return O(e.target.value.toLowerCase())}}),Object(d.jsx)("span",{className:"icon is-left",children:Object(d.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(d.jsx)("div",{className:"panel-block",children:Object(d.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(d.jsx)("div",{className:"level-left",children:[16,17,18,19,20].map((function(e){return Object(d.jsx)(n.b,{"data-cy":"century",className:"button mr-1".concat(f.includes(e)?" is-info":""),to:"#/people?centuries=".concat(e),onClick:function(){f.includes(e)?N(f.filter((function(t){return t!==e}))):N([].concat(Object(j.a)(f),[e]))},children:e},e)}))}),Object(d.jsx)("div",{className:"level-right ml-4",children:Object(d.jsx)(n.b,{"data-cy":"centuryALL",className:"button is-success is-outlined",to:"#/people",onClick:function(){return N([])},children:"All"})})]})}),Object(d.jsx)("div",{className:"panel-block",children:Object(d.jsx)(n.b,{className:"button is-link is-outlined is-fullwidth",to:"#/people",onClick:function(){o(b.all),O(""),N([])},children:"Reset all filters"})})]})},h=(c(36),function(){return Object(d.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(d.jsx)("div",{className:"Loader__content"})})}),p=c(22),O=c.n(p),m=function(e){var t=e.person,c=e.handleSlugUser,s=e.people,a=e.isParent,r=e.searchParams,o=Object(i.useMemo)((function(){if("no"===a)return t;var e=s.find((function(e){return e.name===t.motherName}));return"father"===a&&(e=s.find((function(e){return e.name===t.fatherName}))),e||t}),[]);return Object(d.jsx)(n.b,{className:"f"===o.sex?"has-text-danger":"",to:"#/people/".concat(o.slug).concat(r),onClick:function(){return c(o.slug)},children:o.name})},x=function(e){var t=e.person,c=e.people,s=e.handleSlugUser,n=e.slugUser,a=e.searchParams;return Object(d.jsxs)("tr",{"data-cy":"person",className:t.slug===n?"has-background-warning":"",children:[Object(d.jsx)("td",{children:Object(d.jsx)(m,{person:t,handleSlugUser:s,people:c,isParent:"no",searchParams:a})}),Object(d.jsx)("td",{children:t.sex}),Object(d.jsx)("td",{children:t.born}),Object(d.jsx)("td",{children:t.died}),null!==t.motherName?c.some((function(e){return e.name===t.motherName}))?Object(d.jsx)("td",{children:Object(d.jsx)(m,{person:t,handleSlugUser:s,people:c,isParent:"mother",searchParams:a})}):Object(d.jsx)("td",{children:t.motherName}):Object(d.jsx)("td",{children:"-"}),null!==t.fatherName?c.some((function(e){return e.name===t.fatherName}))?Object(d.jsx)("td",{children:Object(d.jsx)(m,{person:t,handleSlugUser:s,people:c,isParent:"father",searchParams:a})}):Object(d.jsx)("td",{children:t.fatherName}):Object(d.jsx)("td",{children:"-"})]})},f=function(e){return e[e.notSorted=0]="notSorted",e[e.sortAsc=1]="sortAsc",e[e.sortDesc=2]="sortDesc",e}(f||{}),N=function(e){var t=e.people,c=Object(a.q)(),s=Object(i.useState)(c.slug),r=Object(l.a)(s,2),o=r[0],b=r[1],u=Object(n.d)(window.location.hash.slice(8)),h=Object(l.a)(u,2),p=h[0],m=h[1],N=Object(i.useState)(f.notSorted),v=Object(l.a)(N,2),g=v[0],S=v[1],w=Object(i.useState)(f.notSorted),k=Object(l.a)(w,2),y=k[0],C=k[1],P=Object(i.useState)(f.notSorted),A=Object(l.a)(P,2),L=A[0],D=A[1],F=Object(i.useState)(f.notSorted),U=Object(l.a)(F,2),E=U[0],M=U[1],_=Object(i.useState)(null),T=Object(l.a)(_,2),B=T[0],H=T[1],J=function(e){b(e)},R=function(e){return O()({"fas fa-sort":e===f.notSorted},{"fas fa-sort-up":e===f.sortAsc},{"fas fa-sort-down":e===f.sortDesc})},q=function(e,t,c){e===f.notSorted?(t(f.sortAsc),p.set("sort",c),m(p)):e===f.sortAsc?(t(f.sortDesc),p.set("order","desc"),m(p)):(t(f.notSorted),p.delete("sort"),p.delete("order"))};Object(i.useEffect)((function(){switch(p.get("sort")){case"name":C(f.sortAsc),"desc"===p.get("order")&&C(f.sortDesc),H("name");break;case"sex":S(f.sortAsc),"desc"===p.get("order")&&S(f.sortDesc),H("sex");break;case"born":D(f.sortAsc),"desc"===p.get("order")&&D(f.sortDesc),H("born");break;case"died":M(f.sortAsc),"desc"===p.get("order")&&M(f.sortDesc),H("died")}}),[p]);var I=function(e){var c=f.notSorted;switch(e){case"name":c=y;break;case"sex":c=g;break;case"born":c=L;break;case"died":c=E}if(e)switch(c){case f.sortAsc:return t.slice().sort((function(t,c){var s=t[e],n=c[e];return"string"===typeof s&&"string"===typeof n?s.localeCompare(n):"number"===typeof s&&"number"===typeof n?s-n:0}));case f.sortDesc:return t.slice().sort((function(t,c){var s=t[e],n=c[e];return"string"===typeof s&&"string"===typeof n?n.localeCompare(s):"number"===typeof s&&"number"===typeof n?n-s:0}));case f.notSorted:return Object(j.a)(t);default:return t}return t}(B);return Object(d.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:Object(d.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(d.jsx)("a",{href:p.has("sort")?"#/people?".concat(p.toString()):"#/people",onClick:function(){p.delete("order"),q(y,C,"name"),S(f.notSorted),D(f.notSorted),M(f.notSorted)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:R(y)})})})]})}),Object(d.jsx)("th",{children:Object(d.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(d.jsx)("a",{href:p.has("sort")?"#/people?".concat(p.toString()):"#/people",onClick:function(){p.delete("order"),q(g,S,"sex"),C(f.notSorted),D(f.notSorted),M(f.notSorted)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:R(g)})})})]})}),Object(d.jsx)("th",{children:Object(d.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(d.jsx)("a",{href:p.has("sort")?"#/people?".concat(p.toString()):"#/people",onClick:function(){p.delete("order"),q(L,D,"born"),C(f.notSorted),S(f.notSorted),M(f.notSorted)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:R(L)})})})]})}),Object(d.jsx)("th",{children:Object(d.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(d.jsx)("a",{href:p.has("sort")?"#/people?".concat(p.toString()):"#/people",onClick:function(){p.delete("order"),q(E,M,"died"),C(f.notSorted),S(f.notSorted),D(f.notSorted)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:R(E)})})})]})}),Object(d.jsx)("th",{children:"Mother"}),Object(d.jsx)("th",{children:"Father"})]})}),Object(d.jsx)("tbody",{children:I.map((function(e){return Object(d.jsx)(x,{person:e,people:t,handleSlugUser:J,slugUser:o,searchParams:p.toString()},e.slug)}))})]})},v="https://mate-academy.github.io/react_people-table/api/people.json";function g(e){return new Promise((function(t){return setTimeout(t,e)}))}function S(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(500).then((function(){return fetch(v)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],n=Object(i.useState)(""),a=Object(l.a)(n,2),j=a[0],b=a[1],p=Object(i.useState)(!1),O=Object(l.a)(p,2),m=O[0],x=O[1],f=Object(i.useState)([]),v=Object(l.a)(f,2),g=v[0],w=v[1];Object(i.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,S();case 4:t=e.sent,s(t),w(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),b("Unable to load people");case 12:x(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{className:"title",children:"People Page"}),Object(d.jsx)("div",{className:"block",children:Object(d.jsx)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:m?Object(d.jsx)(h,{}):Object(d.jsxs)(d.Fragment,{children:[j&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),Object(d.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})]}),Object(d.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(d.jsx)(u,{people:c,handlePeople:function(e){w(e)}})}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"box table-container",children:g.length>0?Object(d.jsx)(N,{people:g}):Object(d.jsx)("p",{children:"There are no people matching the current search criteria"})})})]})})})]})},y=function(e){var t=e.isActive;return O()("navbar-item",{"has-background-grey-lighter":t})},C=function(){return Object(d.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"navbar-brand",children:[Object(d.jsx)(n.c,{to:"/",className:y,children:"Home"}),Object(d.jsx)(n.c,{"aria-current":"page",to:"/people",className:y,children:"People"})]})})})},P=(c(37),function(){return Object(d.jsx)("h1",{className:"title",children:"Home Page"})}),A=function(){return Object(d.jsx)("h1",{className:"title",children:"Page not found"})},L=function(){return Object(d.jsxs)("div",{"data-cy":"app",children:[Object(d.jsx)(C,{}),Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)(a.d,{children:[Object(d.jsx)(a.b,{path:"/",element:Object(d.jsx)(P,{})}),Object(d.jsxs)(a.b,{path:"/people",element:Object(d.jsx)(k,{}),children:[Object(d.jsx)(a.b,{index:!0,element:Object(d.jsx)(k,{})}),Object(d.jsx)(a.b,{path:":slug",element:Object(d.jsx)(k,{})})]}),Object(d.jsx)(a.b,{path:"/home",element:Object(d.jsx)(a.a,{to:"/"})}),Object(d.jsx)(a.b,{path:"*",element:Object(d.jsx)(A,{})})]})})})]})};Object(s.createRoot)(document.getElementById("root")).render(Object(d.jsx)(n.a,{children:Object(d.jsx)(L,{})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.b9c6628b.chunk.js.map