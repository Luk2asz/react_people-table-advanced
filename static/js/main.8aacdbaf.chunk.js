(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(26),a=n(9),r=(n(36),n(37),n(3)),s=n(5),l=n(6),o=n(4),i=n(0),j=n(14),d=n(8),u=n(27);function b(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),c=t[0],a=t[1];null===a?n.delete(c):Array.isArray(a)?(n.delete(c),a.forEach((function(e){n.append(c,e)}))):n.set(c,a)})),n.toString()}var h=n(1),O=["children","params"],m=function(e){var t=e.children,n=e.params,c=Object(u.a)(e,O),r=Object(a.d)(),s=Object(o.a)(r,1)[0];return Object(h.jsx)(a.b,Object(j.a)(Object(j.a)({to:{search:b(s,n)}},c),{},{children:t}))},p=function(e){return e.male="m",e.female="f",e.all="all",e}(p||{}),f=function(e){var t,n=e.people,c=e.handlePeople,r=e.handleParams,s=Object(a.d)(window.location.hash.substring(window.location.hash.indexOf("?"))),l=Object(o.a)(s,2),u=l[0],b=l[1],O=Object(i.useState)(p.all),f=Object(o.a)(O,2),x=f[0],g=f[1],v=Object(i.useState)(null!==(t=u.get("query"))&&void 0!==t?t:""),N=Object(o.a)(v,2),S=N[0],w=N[1],y=Object(i.useState)(u.getAll("centuries").map((function(e){return+e}))),k=Object(o.a)(y,2),P=k[0],C=k[1];Object(i.useEffect)((function(){u.get("sex")===p.male?g(p.male):u.get("sex")===p.female&&g(p.female),window.location.hash.includes("?")?r(window.location.hash.substring(window.location.hash.indexOf("?"))):r("")})),Object(i.useEffect)((function(){var e=n.filter((function(e){return x===p.all?e:e.sex===x})),t=0===P.length?[16,17,18,19,20]:Object(d.a)(P),a=e.filter((function(e){return t.includes(Math.ceil(e.born/100))}));c(a.filter((function(e){var t=!1,n=!1;return e.fatherName&&(t=e.fatherName.toLocaleLowerCase().includes(S)),e.motherName&&(n=e.motherName.toLocaleLowerCase().includes(S)),e.name.toLocaleLowerCase().includes(S)||t||n})))}),[S,x,P]);return Object(h.jsxs)("nav",{className:"panel",children:[Object(h.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(h.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(h.jsx)(m,{className:x===p.all?"is-active":"",params:{sex:null},onClick:function(){g(p.all),u.delete("sex")},children:"All"}),Object(h.jsx)(m,{className:x===p.male?"is-active":"",params:{sex:"m"},onClick:function(){return g(p.male)},children:"Male"}),Object(h.jsx)(m,{className:x===p.female?"is-active":"",params:{sex:"f"},onClick:function(){return g(p.female)},children:"Female"})]}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsxs)("p",{className:"control has-icons-left",children:[Object(h.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:S,onChange:function(e){w(e.target.value.toLowerCase()),b(Object(j.a)(Object(j.a)({},u),{},{query:e.target.value.toLowerCase()}))}}),Object(h.jsx)("span",{className:"icon is-left",children:Object(h.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(h.jsx)("div",{className:"level-left",children:[16,17,18,19,20].map((function(e){return Object(h.jsx)(m,{"data-cy":"century",className:"button mr-1".concat(P.includes(e)?" is-info":""),onClick:function(){return function(e){P.includes(e)?C(P.filter((function(t){return t!==e}))):C([].concat(Object(d.a)(P),[e]))}(e)},params:{centuries:P.includes(e)?P.filter((function(t){return t!==e})).map((function(e){return String(e)})):[].concat(Object(d.a)(P.map((function(e){return String(e)}))),[String(e)])},children:e},e)}))}),Object(h.jsx)("div",{className:"level-right ml-4",children:Object(h.jsx)(m,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:null},onClick:function(){return C([])},children:"All"})})]})}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsx)(m,{className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null},onClick:function(){g(p.all),w(""),C([])},children:"Reset all filters"})})]})},x=(n(39),function(){return Object(h.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(h.jsx)("div",{className:"Loader__content"})})}),g=n(24),v=n.n(g),N=function(e){var t=e.person,n=e.handleSlugUser,c=e.people,r=e.isParent,s=e.allParams,l=Object(i.useMemo)((function(){if("no"===r)return t;var e=c.find((function(e){return e.name===t.motherName}));return"father"===r&&(e=c.find((function(e){return e.name===t.fatherName}))),e||t}),[]);return Object(h.jsx)(a.b,{className:"f"===l.sex?"has-text-danger":"",to:"/people/".concat(l.slug).concat(s),onClick:function(){return n(l.slug)},children:l.name})},S=function(e){var t=e.person,n=e.people,c=e.handleSlugUser,a=e.slugUser,r=e.allParams;return Object(h.jsxs)("tr",{"data-cy":"person",className:t.slug===a?"has-background-warning":"",children:[Object(h.jsx)("td",{children:Object(h.jsx)(N,{person:t,handleSlugUser:c,people:n,isParent:"no",allParams:r})}),Object(h.jsx)("td",{children:t.sex}),Object(h.jsx)("td",{children:t.born}),Object(h.jsx)("td",{children:t.died}),null!==t.motherName?n.some((function(e){return e.name===t.motherName}))?Object(h.jsx)("td",{children:Object(h.jsx)(N,{person:t,handleSlugUser:c,people:n,isParent:"mother",allParams:r})}):Object(h.jsx)("td",{children:t.motherName}):Object(h.jsx)("td",{children:"-"}),null!==t.fatherName?n.some((function(e){return e.name===t.fatherName}))?Object(h.jsx)("td",{children:Object(h.jsx)(N,{person:t,handleSlugUser:c,people:n,isParent:"father",allParams:r})}):Object(h.jsx)("td",{children:t.fatherName}):Object(h.jsx)("td",{children:"-"})]})},w=function(e){return e[e.notSorted=0]="notSorted",e[e.sortAsc=1]="sortAsc",e[e.sortDesc=2]="sortDesc",e}(w||{}),y=function(e){var t=e.people,n=e.allParams,c=Object(r.q)(),s=Object(i.useState)(c.slug),l=Object(o.a)(s,2),j=l[0],u=l[1],b=Object(a.d)(window.location.hash.substring(window.location.hash.indexOf("?"))),O=Object(o.a)(b,2),p=O[0],f=O[1],x=Object(i.useState)(w.notSorted),g=Object(o.a)(x,2),N=g[0],y=g[1],k=Object(i.useState)(w.notSorted),P=Object(o.a)(k,2),C=P[0],A=P[1],L=Object(i.useState)(w.notSorted),F=Object(o.a)(L,2),D=F[0],U=F[1],E=Object(i.useState)(w.notSorted),M=Object(o.a)(E,2),_=M[0],T=M[1],q=Object(i.useState)(null),R=Object(o.a)(q,2),B=R[0],H=R[1],J=function(e){u(e)},I=function(e){return v()({"fas fa-sort":e===w.notSorted},{"fas fa-sort-up":e===w.sortAsc},{"fas fa-sort-down":e===w.sortDesc})},z=function(e,t,n){e===w.notSorted?(t(w.sortAsc),p.set("sort",n),f(p)):e===w.sortAsc?(t(w.sortDesc),p.set("order","desc"),f(p)):(t(w.notSorted),p.delete("sort"),p.delete("order"))};Object(i.useEffect)((function(){switch(p.get("sort")){case"name":A(w.sortAsc),"desc"===p.get("order")&&A(w.sortDesc),H("name");break;case"sex":y(w.sortAsc),"desc"===p.get("order")&&y(w.sortDesc),H("sex");break;case"born":U(w.sortAsc),"desc"===p.get("order")&&U(w.sortDesc),H("born");break;case"died":T(w.sortAsc),"desc"===p.get("order")&&T(w.sortDesc),H("died")}}),[p]);var G=function(e){var n=w.notSorted;switch(e){case"name":n=C;break;case"sex":n=N;break;case"born":n=D;break;case"died":n=_}if(e)switch(n){case w.sortAsc:return t.slice().sort((function(t,n){var c=t[e],a=n[e];return"string"===typeof c&&"string"===typeof a?c.localeCompare(a):"number"===typeof c&&"number"===typeof a?c-a:0}));case w.sortDesc:return t.slice().sort((function(t,n){var c=t[e],a=n[e];return"string"===typeof c&&"string"===typeof a?a.localeCompare(c):"number"===typeof c&&"number"===typeof a?a-c:0}));case w.notSorted:return Object(d.a)(t);default:return t}return t}(B),K=function(e){return p.get("sort")===e&&p.has("order")?null:e},Q=function(e){return p.get("sort")!==e||p.has("order")?null:"desc"};return Object(h.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(h.jsx)(m,{params:{sort:K("name"),order:Q("name")},onClick:function(){p.delete("order"),z(C,A,"name"),y(w.notSorted),U(w.notSorted),T(w.notSorted)},children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:I(C)})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(h.jsx)(m,{params:{sort:K("sex"),order:Q("sex")},onClick:function(){p.delete("order"),z(N,y,"sex"),A(w.notSorted),U(w.notSorted),T(w.notSorted)},children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:I(N)})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(h.jsx)(m,{params:{sort:K("born"),order:Q("born")},onClick:function(){p.delete("order"),z(D,U,"born"),A(w.notSorted),y(w.notSorted),T(w.notSorted)},children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:I(D)})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(h.jsx)(m,{params:{sort:K("died"),order:Q("died")},onClick:function(){p.delete("order"),z(_,T,"died"),A(w.notSorted),y(w.notSorted),U(w.notSorted)},children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:I(_)})})})]})}),Object(h.jsx)("th",{children:"Mother"}),Object(h.jsx)("th",{children:"Father"})]})}),Object(h.jsx)("tbody",{children:G.map((function(e){return Object(h.jsx)(S,{person:e,people:t,handleSlugUser:J,slugUser:j,allParams:n},e.slug)}))})]})},k="https://mate-academy.github.io/react_people-table/api/people.json";function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function C(){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(500).then((function(){return fetch(k)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),r=Object(o.a)(a,2),j=r[0],d=r[1],u=Object(i.useState)(!1),b=Object(o.a)(u,2),O=b[0],m=b[1],p=Object(i.useState)([]),g=Object(o.a)(p,2),v=g[0],N=g[1],S=Object(i.useState)(""),w=Object(o.a)(S,2),k=w[0],P=w[1];Object(i.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,C();case 4:t=e.sent,c(t),N(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),d("Unable to load people");case 12:m(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"title",children:"People Page"}),Object(h.jsx)("div",{className:"block",children:Object(h.jsx)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:O?Object(h.jsx)(x,{}):Object(h.jsx)(h.Fragment,{children:j?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})}):Object(h.jsx)(h.Fragment,{children:0===n.length?Object(h.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(h.jsx)(f,{people:n,handlePeople:function(e){N(e)},handleParams:function(e){P(e)}})}),Object(h.jsx)("div",{className:"column",children:Object(h.jsx)("div",{className:"box table-container",children:v.length>0?Object(h.jsx)(y,{people:v,allParams:k}):Object(h.jsx)("p",{children:"There are no people matching the current search criteria"})})})]})})})})})]})},F=function(e){var t=e.isActive;return v()("navbar-item",{"has-background-grey-lighter":t})},D=function(){return Object(h.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"navbar-brand",children:[Object(h.jsx)(a.c,{to:"/",className:F,children:"Home"}),Object(h.jsx)(a.c,{"aria-current":"page",to:"/people",className:F,children:"People"})]})})})},U=(n(40),function(){return Object(h.jsx)("h1",{className:"title",children:"Home Page"})}),E=function(){return Object(h.jsx)("h1",{className:"title",children:"Page not found"})},M=function(){return Object(h.jsxs)("div",{"data-cy":"app",children:[Object(h.jsx)(D,{}),Object(h.jsx)("div",{className:"section",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(r.d,{children:[Object(h.jsx)(r.b,{path:"/",element:Object(h.jsx)(U,{})}),Object(h.jsxs)(r.b,{path:"/people",element:Object(h.jsx)(L,{}),children:[Object(h.jsx)(r.b,{index:!0,element:Object(h.jsx)(L,{})}),Object(h.jsx)(r.b,{path:":slug",element:Object(h.jsx)(L,{})})]}),Object(h.jsx)(r.b,{path:"/home",element:Object(h.jsx)(r.a,{to:"/"})}),Object(h.jsx)(r.b,{path:"*",element:Object(h.jsx)(E,{})})]})})})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(h.jsx)(a.a,{children:Object(h.jsx)(M,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.8aacdbaf.chunk.js.map